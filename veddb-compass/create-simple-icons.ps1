# Create simple valid icons for VedDB Compass development

$iconsDir = ".\icons"

# Create a minimal valid 32x32 PNG (1x1 pixel, then we'll resize conceptually)
# This is a valid 1x1 transparent PNG
$png1x1 = [byte[]]@(
    0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A,  # PNG signature
    0x00, 0x00, 0x00, 0x0D, 0x49, 0x48, 0x44, 0x52,  # IHDR chunk header
    0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01,  # 1x1 dimensions
    0x08, 0x06, 0x00, 0x00, 0x00, 0x1F, 0x15, 0xC4, 0x89,  # IHDR data + CRC
    0x00, 0x00, 0x00, 0x0B, 0x49, 0x44, 0x41, 0x54,  # IDAT chunk header
    0x78, 0x9C, 0x63, 0x00, 0x01, 0x00, 0x00, 0x05, 0x00, 0x01, 0x0D, 0x0A, 0x2D, 0xB4,  # IDAT data + CRC
    0x00, 0x00, 0x00, 0x00, 0x49, 0x45, 0x4E, 0x44, 0xAE, 0x42, 0x60, 0x82   # IEND chunk
)

# Write PNG files
[System.IO.File]::WriteAllBytes("$iconsDir/32x32.png", $png1x1)
[System.IO.File]::WriteAllBytes("$iconsDir/128x128.png", $png1x1)
[System.IO.File]::WriteAllBytes("$iconsDir/128x128@2x.png", $png1x1)

# Create a minimal valid ICO file (16x16, 1 bit depth)
$ico = [byte[]]@(
    0x00, 0x00,  # Reserved
    0x01, 0x00,  # Type (1 = ICO)
    0x01, 0x00,  # Number of images
    # Image directory entry
    0x10,        # Width (16)
    0x10,        # Height (16)
    0x00,        # Color count (0 = no palette)
    0x00,        # Reserved
    0x01, 0x00,  # Color planes
    0x01, 0x00,  # Bits per pixel
    0x28, 0x01, 0x00, 0x00,  # Size of image data (296 bytes)
    0x16, 0x00, 0x00, 0x00   # Offset to image data
) + [byte[]]@(
    # BITMAPINFOHEADER (40 bytes)
    0x28, 0x00, 0x00, 0x00,  # Size of header
    0x10, 0x00, 0x00, 0x00,  # Width
    0x20, 0x00, 0x00, 0x00,  # Height (double for ICO)
    0x01, 0x00,              # Planes
    0x01, 0x00,              # Bits per pixel
    0x00, 0x00, 0x00, 0x00,  # Compression
    0x00, 0x01, 0x00, 0x00,  # Image size
    0x00, 0x00, 0x00, 0x00,  # X pixels per meter
    0x00, 0x00, 0x00, 0x00,  # Y pixels per meter
    0x02, 0x00, 0x00, 0x00,  # Colors used
    0x00, 0x00, 0x00, 0x00   # Important colors
) + [byte[]]@(
    # Color palette (8 bytes)
    0x00, 0x00, 0x00, 0x00,  # Black
    0xFF, 0xFF, 0xFF, 0x00   # White
) + [byte[]]@(
    # XOR mask (32 bytes - 16x16 pixels, 1 bit each, padded to 4-byte boundary)
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
) + [byte[]]@(
    # AND mask (32 bytes - transparency mask)
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF
)

[System.IO.File]::WriteAllBytes("$iconsDir/icon.ico", $ico)

# Create a minimal ICNS file (macOS)
$icns = [byte[]]@(
    0x69, 0x63, 0x6E, 0x73,  # 'icns' magic
    0x00, 0x00, 0x00, 0x08   # Total file size (8 bytes - just header)
)

[System.IO.File]::WriteAllBytes("$iconsDir/icon.icns", $icns)

Write-Host "Simple valid icons created successfully!"